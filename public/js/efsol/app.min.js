window.app = (function () {
    var instances = {};

    function register(name, instance, setupConfig) {
        instances[name] = instance;
        try {
            this.get(name).configure(setupConfig);
            this.get(name).init()
        } catch (exception) {
        }
    }

    function get(name) {
        return instances[name]
    }

    function readConfig() {
        if (typeof window.appConfig === 'undefined') {
            window.appConfig = {}
        }
        app.register('tools', ApplicationTools);
        app.register('variables', ApplicationVariables, app.get('tools').objectHasProperty(window.appConfig, 'variables') ? window.appConfig.variables : null);
        app.register('bus', ApplicationBus, app.get('tools').objectHasProperty(window.appConfig, 'bus') ? window.appConfig.bus : null);
        app.register('popup', ApplicationPopup, app.get('tools').objectHasProperty(window.appConfig, 'popup') ? window.appConfig.popup : null);
        app.register('preloader', ApplicationPreloader, app.get('tools').objectHasProperty(window.appConfig, 'preloader') ? window.appConfig.preloader : null)
    }

    return {register: register, get: get, readConfig: readConfig,}
}());
$(function () {
    app.readConfig(window.appConfig)
})