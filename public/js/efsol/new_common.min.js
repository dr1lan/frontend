(function ($) {
    $(function () {
        function LoadAnchor() {
            $item = window.location.hash;
            $item = $item.slice(1);
            if ($item) {
                target = "a[name=" + $item + "]";
                $(target).next("div").find(".b-link_type_open:first").trigger("click", [!0]);
            }
        }
        LoadAnchor();
        window.onhashchange = LoadAnchor;
        $(".b-list_content_sidebar-and-grid").on("click", ".b-list__item-text", function () {
            itemId = $(this).data("anchor");
            target = "a[name=item" + itemId + "]";
            $(target).next("div").find(".b-link_type_open:first").trigger("click", [!0]);
        });
        $(".b-select2").select2({ minimumResultsForSearch: -1, theme: "vshape-theme", width: "100%" });
        $(".js-show-popup-mobile-callback").on("click", function () {
            var $this = $(this);
            $this.toggleClass("b-menu__item-text_state_selected");
            if ($this.hasClass("b-menu__item-text_state_selected")) {
                app.get("popup").displayMobileCallback();
            } else {
                app.get("popup").closeAll();
            }
            return !1;
        });
        $(".b-section_content_spoiler-pure-content h3").click(function () {
            $(this).parents(".b-section_content_spoiler-pure-content").toggleClass("b-section_state_selected");
        });
        $(".resise-a").css({ height: $(window).outerHeight() - 102 });
        $(window).on("resize", function () {
            $(".resise-a").css({ height: $(window).outerHeight() - 102 });
        });
        $(".resise-b").css({ "max-height": $(window).outerHeight() - 42 });
        $(window).on("resize", function () {
            $(".resise-b").css({ "max-height": $(window).outerHeight() - 42 });
        });
        $(".init_scroller").click(function () {
            $("html, body").animate({ scrollTop: $($(this).data("href")).offset().top - 80 + "px" }, { duration: 500, easing: "swing" });
        });
        $(".b-stripe_content_header .b-menu__item").hover(
            function () {
                $(".b-stripe_content_dropdown-menu", this).stop().slideDown(120).addClass("showMenu");
            },
            function () {
                $(".b-stripe_content_dropdown-menu", this).stop().slideUp(0).removeClass("showMenu");
            }
        );
        setTimeout(function () {
            $(".b-menu__item-text.phone-header").addClass("active-phone");
        }, 500);
        setTimeout(function () {
            $(".h1").addClass("full-opacity");
        }, 500);
        [].slice.call(document.querySelectorAll("select.cs-select")).forEach(function (el) {
            new SelectFx(el);
        });
        var pathnameUrl = window.location.pathname;
        var hrefUrl = window.location.href;
        $(".b-menu.b-menu_content_section .b-menu__item").each(function () {
            var link = $(this).find("a").attr("href");
            if (pathnameUrl == link || hrefUrl == link) {
                $(this).addClass("current");
            }
        });
        window.addEventListener("load", function () {
            var pre = document.getElementsByTagName("pre");
            for (var i = 0; i < pre.length; i++) {
                var divClipboard = document.createElement("div");
                divClipboard.className = "bd-clipboard";
                var button = document.createElement("span");
                button.className = "btn-clipboard";
                button.innerHTML =
                    '<svg class="bx--snippet__icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M1 10H0V2C0 .9.9 0 2 0h8v1H2c-.6 0-1 .5-1 1v8z"></path><path d="M11 4.2V8h3.8L11 4.2zM15 9h-4c-.6 0-1-.4-1-1V4H4.5c-.3 0-.5.2-.5.5v10c0 .3.2.5.5.5h10c.3 0 .5-.2.5-.5V9zm-4-6c.1 0 .3.1.4.1l4.5 4.5c0 .1.1.3.1.4v6.5c0 .8-.7 1.5-1.5 1.5h-10c-.8 0-1.5-.7-1.5-1.5v-10C3 3.7 3.7 3 4.5 3H11z"></path></svg>';
                divClipboard.appendChild(button);
                pre[i].parentElement.insertBefore(divClipboard, pre[i]);
            }
            var btnClipboard = new Clipboard(".btn-clipboard", {
                target: function (trigger) {
                    console.log(trigger.parentElement.nextElementSibling);
                    trigger.clearSelection;
                    return trigger.parentElement.nextElementSibling;
                },
            });
            btnClipboard.on("success", function (e) {
                e.trigger.innerHTML = "<i>Скопировано</i>";
                window.setTimeout(function () {
                    e.trigger.innerHTML =
                        '<svg class="bx--snippet__icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M1 10H0V2C0 .9.9 0 2 0h8v1H2c-.6 0-1 .5-1 1v8z"></path><path d="M11 4.2V8h3.8L11 4.2zM15 9h-4c-.6 0-1-.4-1-1V4H4.5c-.3 0-.5.2-.5.5v10c0 .3.2.5.5.5h10c.3 0 .5-.2.5-.5V9zm-4-6c.1 0 .3.1.4.1l4.5 4.5c0 .1.1.3.1.4v6.5c0 .8-.7 1.5-1.5 1.5h-10c-.8 0-1.5-.7-1.5-1.5v-10C3 3.7 3.7 3 4.5 3H11z"></path></svg>';
                    e.clearSelection();
                }, 800);
            });
        });
        $.reject({
            reject: { msie: !0, firefox1: !0, firefox2: !0, firefox3: !0, unknown: !1, gecko: !1, webkit: !1 },
            imagePath: "/local/templates/inner_new/new_images/browsers/",
            display: ["chrome", "firefox", "msedge"],
            header: "Ваш браузер устарел!",
            paragraph1: "Вы пользуетесь устаревшим браузером или браузером, который не поддерживает современные веб-стандарты.",
            paragraph2: "Пожалуйста, установите современный браузер:",
            close: !1,
            closeCookie: !1,
        });
        return !1;
    });
})(jQuery);
